var Admin=function(){var file_frame;var file_target_input;var file_target_wrapper;return{init:function(){jQuery(".tips, .help_tip").tipTip({'attribute':'data-tip','fadeIn':50,'fadeOut':50,'delay':200});var date=new Date();var currentMonth=date.getMonth();var currentDate=date.getDate();var currentYear=date.getFullYear();jQuery('input#_event_start_date').datetimepicker({sideBySide:true,showClear:true,format:'YYYY-MM-DD',toolbarPlacement:'bottom',minDate:new Date(currentYear,currentMonth,currentDate)});jQuery('input#_event_start_time').datetimepicker({format:'LT'});jQuery('input#_event_end_date').datetimepicker({sideBySide:true,showClear:true,format:'YYYY-MM-DD',toolbarPlacement:'bottom',minDate:new Date(currentYear,currentMonth,currentDate)});jQuery('input#_event_end_time').datetimepicker({format:'LT'});jQuery("input#_event_registration_deadline").datetimepicker({sideBySide:true,showClear:true,format:'YYYY-MM-DD',toolbarPlacement:'bottom',minDate:new Date(currentYear,currentMonth,currentDate)});jQuery('input#_event_expiry_date').datetimepicker({sideBySide:true,format:'l',date:jQuery('#_event_expiry_date').val(),showClear:true,toolbarPlacement:'bottom'});jQuery("#_event_end_date").on("dp.change",function(e){jQuery('#_event_start_date').data("DateTimePicker").maxDate(e.date)});jQuery("#_event_expiry_date").on("dp.change",function(e){jQuery('#_event_expiry_date').data("DateTimePicker").minDate(jQuery('#_event_end_date').val())});jQuery("p.form-field-author").on('click',Admin.author.changeAuthor);jQuery("#setting-event_manager_submission_expire_options").on('change',Admin.settings.selectEventExpiryOption);jQuery(".gam_event_manager_upload_file_button").live('click',Admin.fileUpload.addFile);jQuery(".gam_event_manager_add_another_file_button").live('click',Admin.fileUpload.addAnotherFile)},author:{changeAuthor:function(event){jQuery(this).closest('p').find('.current-author').hide();jQuery(this).closest('p').find('.change-author').show();return false;event.preventDefault()},},settings:{selectEventExpiryOption:function(event){var option=jQuery("#setting-event_manager_submission_expire_options option:selected").val();if(option=='days')jQuery('#setting-event_manager_submission_duration').closest('tr').show();else jQuery('#setting-event_manager_submission_duration').closest('tr').hide();event.preventDefault()}},fileUpload:{addFile:function(event){event.preventDefault();file_target_wrapper=jQuery(this).closest('.file_url');file_target_input=file_target_wrapper.find('input');if(file_frame){file_frame.open();return}file_frame=wp.media.frames.file_frame=wp.media({title:jQuery(this).data('uploader_title'),button:{text:jQuery(this).data('uploader_button_text'),},multiple:false});file_frame.on('select',function(){attachment=file_frame.state().get('selection').first().toJSON();jQuery(file_target_input).val(attachment.url)});file_frame.open()},addAnotherFile:function(event){event.preventDefault();var wrapper=jQuery(this).closest('.form-field');var field_name=jQuery(this).data('field_name');var field_placeholder=jQuery(this).data('field_placeholder');var button_text=jQuery(this).data('uploader_button_text');var button=jQuery(this).data('uploader_button');jQuery(this).before('<span class="file_url"><input type="text" name="'+field_name+'[]" placeholder="'+field_placeholder+'" /><button class="button button-small gam_event_manager_upload_file_button" data-uploader_button_text="'+button_text+'">'+button+'</button></span>')}}}};Admin=Admin();jQuery(document).ready(function($){Admin.init()});